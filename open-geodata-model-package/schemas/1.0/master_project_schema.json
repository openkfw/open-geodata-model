{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "stack://schemas/master_project.schema",
  "description": "This Schema is basically a decision between the WDPA-Schema and the project-core-Schema",
  "title": "Master Project Schema",
  "type": "object",
  "allOf": [
    {
      "if": {
        "properties": {
          "WDPA_id": { "type": "number" },
          "IPLC_in_core_protected_area": { "type": "string" },
          "resettlements_prior_or_during": { "type": "string" },
          "realization_of_FPIC_prior_or_during": { "type": "string" },
          "governance_of_territory": { "type": "string" },
          "existence_GRM": { "type": "string" },
          "known_human_rights_violations_prior_or_during": {"type": "string"}
        },
        "anyOf": [
          { "required": ["WDPA_id"] },
          { "required": ["IPLC_in_core_protected_area"] },
          { "required": ["resettlements_prior_or_during"] },
          { "required": ["realization_of_FPIC_prior_or_during"] },
          { "required": ["governance_of_territory"] },
          { "required": ["existence_GRM"] },
          { "required": ["known_human_rights_violations_prior_or_during"] }
        ]
      },
      "then": {
        "allOf": [
          { "$ref": "stack://schemas/wdpa.schema"}
        ]
      }
    },
    {
      "if": {
        "properties": { "WDPA_id": { "type": "number" } },
        "required": ["WDPA_id"]
      },
      "then": {
        "properties": {
          "startDate": { "type": "string", "format": "date" }
        },
        "required": [
            "kfwProjectNoINPRO",
            "plannedOrActualStartDate",
            "plannedOrActualEndDate",
            "activityDescriptionGeneral",
            "schemeVersion"
        ]
      },
      "else": {
        "allOf": [
          { "$ref": "stack://schemas/project_core.schema" }
        ]
      }
    }
  ]
}
